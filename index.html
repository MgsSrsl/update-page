<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî –°–∫–ª–∞–¥—Å–±–æ—Ä–∫–∞</title>
  <style>
    :root{
      --glass-bg: rgba(255,255,255,.1);
      --glass-stroke: rgba(255,255,255,.2);
      --text: #eee;
      --muted: #bbb;
      --accent: #ff5252;
      --accent-2: #ff8a80;
      --shadow: 0 4px 20px rgba(0,0,0,.3);
    }
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font-family:"Segoe UI",system-ui,sans-serif;
      background:url("https://i.imgur.com/XCL2ebZ.jpeg") center/cover no-repeat fixed;
      position:relative; display:flex; justify-content:center; box-sizing:border-box;
      padding:28px 16px 140px; /* –∑–∞–ø–∞—Å –ø–æ–¥ —à–µ—Å—Ç–µ—Ä—ë–Ω–∫—É */
    }
    body::before{content:""; position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:0}
    .page{position:relative; z-index:1; width:min(760px,100%)}

    h1{margin:0 0 8px; text-align:center; color:var(--accent)}
    #versionLine{margin:0 0 18px; text-align:center; color:#ddd}

    .card{
      background:var(--glass-bg); border:1px solid var(--glass-stroke);
      border-radius:12px; box-shadow:var(--shadow);
      backdrop-filter:blur(6px); padding:18px 16px; margin-bottom:16px;
    }
    .changelog h2{margin:0 0 10px; text-align:center; color:var(--accent-2)}
    .changelog h3{margin:14px 0 6px; color:#ffd1ce}
    .changelog ul{margin:0 0 8px 18px; padding:0; line-height:1.5}
    .changelog li{margin:4px 0}

    .download-btn{
      display:block; margin:18px auto 6px; text-decoration:none; text-align:center;
      background:#d32f2f; color:#fff; font-weight:700; font-size:18px; padding:14px 36px;
      border-radius:10px; box-shadow:0 0 15px rgba(211,47,47,.4); transition:background .2s, transform .1s;
      width:fit-content;
    }
    .download-btn:hover{background:#b71c1c; transform:translateY(-1px)}
    footer{text-align:center; color:var(--muted); font-size:13px; }

    /* ===== –ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥ –∫–∞—Ç–æ–º ===== */
    details.history{ margin-top:16px }
    details.history > summary{
      list-style:none; cursor:pointer; user-select:none;
      padding:14px 16px; border-radius:12px; border:1px solid var(--glass-stroke);
      background:rgba(255,255,255,.09); backdrop-filter:blur(6px);
      box-shadow:var(--shadow); display:flex; align-items:center; justify-content:space-between;
      font-weight:700;
    }
    details.history > summary::-webkit-details-marker{ display:none }
    .summary-title{ color:#fff }
    .summary-right{ color:#ddd; font-size:14px }
    .history-content{
      margin-top:10px;
      background:var(--glass-bg); border:1px solid var(--glass-stroke);
      border-radius:12px; box-shadow:var(--shadow); backdrop-filter:blur(6px);
      padding:14px 16px;
    }
    .old-version{ border-top:1px solid var(--glass-stroke); padding-top:10px; margin-top:10px }
    .old-version:first-child{ border-top:none; padding-top:0; margin-top:0 }
    .old-version strong{ display:block; color:#ffd1ce; margin-bottom:6px }
    .old-version ul{ margin:0 0 8px 18px; line-height:1.5 }

    /* ===== FAB-–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —à–µ—Å—Ç–µ—Ä—ë–Ω–∫—É ===== */
    .fab{
      position:fixed; right:18px; z-index:5;
      border:none; border-radius:12px; color:#fff; font-weight:700; font-size:15px;
      padding:12px 16px; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,.4);
    }
    #gearBtn{
      bottom:24px; width:54px; height:54px; border-radius:50%;
      background:rgba(255,255,255,.18); backdrop-filter:blur(6px); font-size:22px; padding:0;
    }
    #addReleaseBtn{ bottom:92px; background:#ff5252; display:none; }
    #exportBtn{ bottom:156px; background:#2e7d32; display:none; }
    body.edit-mode #addReleaseBtn, body.edit-mode #exportBtn{ display:block; }
    @media (max-width: 900px){
      /* –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –º–æ–±–∏–ª–∫–µ */
      #exportBtn{ bottom: 172px; }
      #addReleaseBtn{ bottom: 108px; }
      #gearBtn{ bottom: 24px; }
    }

    /* ===== –ú–æ–¥–∞–ª–∫–∏ ===== */
    .modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); z-index:1000;
            align-items:center; justify-content:center; padding:16px }
    .modal-card{
      background:#222; color:#fff; border-radius:12px; box-shadow:var(--shadow);
      width:min(900px, 96%); max-height:92vh; overflow:auto; padding:18px;
    }
    .modal h2{ margin:0 0 12px }
    .form-row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-bottom:10px }
    .form-row .full{ grid-column:1/-1 }
    input, textarea{
      width:100%; box-sizing:border-box; border:1px solid #444; background:#111; color:#fff;
      border-radius:8px; padding:10px; font-size:15px;
    }
    /* –ë–æ–ª—å—à–æ–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞ */
    #relNotes{ min-height: 55vh; }
    .actions{ display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; margin-top:10px }
    .btn{ border:none; border-radius:8px; padding:10px 14px; font-weight:700; color:#fff; cursor:pointer }
    .btn-primary{ background:#ff5252 }
    .btn-secondary{ background:#555 }
    .btn-copy{ background:#1976d2 }
  </style>
</head>
<body>
  <main class="page">
    <h1>üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°–∫–ª–∞–¥–°–±–æ—Ä–∫–∞</h1>
    <p id="versionLine">–í–µ—Ä—Å–∏—è 1.3.2 –æ—Ç 21 –æ–∫—Ç—è–±—Ä—è 2025</p>

    <!-- –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è -->
    <section class="card changelog" id="mainChangelogBlock">
      <h2>üî• HotFix ‚Äî 1.3.2</h2>

      <h3>üë∑ –£ –∫–ª–∞–¥–æ–≤—â–∏–∫–∞</h3>
      <ul>
        <li>üîÅ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á ‚Äî –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º –∏–ª–∏ –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫.</li>
        <li>–ö–Ω–æ–ø–∫–∞ –æ—Å–Ω–∞—â–µ–Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.</li>
        <li>‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.</li>
      </ul>

      <h3>üßë‚Äçüíº –£ –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞</h3>
      <ul>
        <li>üì¶ –¢–µ–ø–µ—Ä—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é.</li>
      </ul>

      <h3>üåê –£ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
      <ul>
        <li>üü¢ –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å–≤—è–∑–∏ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º: –ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –≥–æ—Ä–∏—Ç –∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´–í —Å–µ—Ç–∏¬ª, –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö ‚Äî –∂—ë–ª—Ç–∞—è ¬´–ü–ª–æ—Ö–∞—è —Å–≤—è–∑—å¬ª.</li>
        <li>–ü—Ä–∏ –ø–æ–ª–Ω–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–∏–π –±–∞–Ω–Ω–µ—Ä —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º, —á—Ç–æ ¬´–≤ –≤–∞–≥–æ–Ω—á–∏–∫–µ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å Wi-Fi¬ª.</li>
        <li>üñºÔ∏è –§–æ—Ç–æ –≤ –∑–∞–¥–∞—á–µ –º–æ–∂–Ω–æ –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞—Ç—å (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –≤ –ø—Ä–µ–≤—å—é).</li>
        <li>‚è±Ô∏è –í –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è, –≤–∑—è—Ç–∏—è –≤ —Ä–∞–±–æ—Ç—É –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.</li>
      </ul>

      <h3>üí¨ –£ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h3>
      <ul>
        <li>üîî –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω—ã–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–∑–≤—Ä–∞—Ç—ã –∏ –∑–∞–∫–∞–∑—ã –Ø–Ω–¥–µ–∫—Å) –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</li>
      </ul>
    </section>

    <a class="download-btn" href="https://apk-download-gamma.vercel.app/app-release.apk" download>‚¨á –°–∫–∞—á–∞—Ç—å APK</a>
    <footer>MgsINC ¬© <span id="year">2025</span></footer>

    <!-- –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–ª–∏–∫–æ–º –ø–æ–¥ –∫–∞—Ç–æ–º -->
    <details class="history" id="history">
      <summary>
        <span class="summary-title">üìú –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π</span>
        <span class="summary-right">–ü–æ–∫–∞–∑–∞—Ç—å (2)</span>
      </summary>
      <div class="history-content">
        <div class="old-version">
          <strong>–í–µ—Ä—Å–∏—è 1.3.1</strong>
          <ul>
            <li>Hotfix</li>
            <li>–ü—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞ ¬´–∫–∞—Ä–∞–Ω–¥–∞—à¬ª / ¬´–ø—Ä–∏–±–ª–∏–∑–∏—Ç—å¬ª –±–æ–ª—å—à–µ –Ω–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω.</li>
            <li>–§–∏–∫—Å –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á–∏ ‚Äî —Ç–µ–ø–µ—Ä—å –≤—Å—è –æ–±–ª–∞—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞.</li>
            <li>–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–¥–∞—á.</li>
            <li>–¢–µ–ø–µ—Ä—å –µ—Å—Ç—å –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∑–∞–¥–∞—á–∏.</li>
            <li><b>New Feature</b> ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—á–∞—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/—Ñ–∞–π–ª–∞ –ø—Ä—è–º–æ –∏–∑ –∑–∞–¥–∞—á–∏.</li>
          </ul>
        </div>

        <div class="old-version">
          <strong>–í–µ—Ä—Å–∏—è 1.2</strong>
          <ul>
            <li>–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –±–æ–ª–µ–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–∞–Ω–Ω–µ—Ä —Å–≤–µ—Ä—Ö—É —Å –∫–Ω–æ–ø–∫–æ–π ¬´–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ¬ª. –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –µ—Å—Ç—å –≤—Ç–æ—Ä–∞—è, –≤–µ–¥—É—â–∞—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.</li>
            <li>–í —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ ¬´–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ¬ª.</li>
            <li>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω—É–∂–Ω–∞—è –∑–∞–¥–∞—á–∞.</li>
            <li>–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (—Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º –Ω–∞—á–∞–ª—å–Ω–∏–∫).</li>
            <li>–í—ã–Ω–µ—Å–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞–Ω–∏–π –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π ‚Äî –≤–∏–¥–Ω–æ –±–µ–∑ –∑–∞—Ö–æ–¥–∞ –≤ —Å–µ–∫—Ü–∏—é (—Ä–µ–∂–∏–º –∫–ª–∞–¥–æ–≤—â–∏–∫–∞).</li>
            <li>–ö–Ω–æ–ø–∫–∞ ¬´–í—ã—Ö–æ–¥¬ª –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤–Ω–∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞.</li>
          </ul>
        </div>
      </div>
    </details>
  </main>

  <!-- FAB-–∫–Ω–æ–ø–∫–∏ (–ø–æ–¥ —à–µ—Å—Ç–µ—Ä—ë–Ω–∫—É) -->
  <button id="gearBtn" class="fab" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ">‚öôÔ∏è</button>
  <button id="addReleaseBtn" class="fab" title="–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ª–∏–∑">‚ûï Add</button>
  <button id="exportBtn" class="fab" title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å index.html">üìÑ Export</button>

  <!-- –ú–æ–¥–∞–ª–∫–∞: –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ª–∏–∑ -->
  <div class="modal" id="addModal" role="dialog" aria-modal="true" aria-labelledby="addModalTitle">
    <div class="modal-card">
      <h2 id="addModalTitle">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é</h2>
      <div class="form-row">
        <div><input id="relVer" placeholder="–í–µ—Ä—Å–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä 1.3.3)" /></div>
        <div><input id="relDate" placeholder="–î–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä 21 –æ–∫—Ç—è–±—Ä—è 2025)" /></div>
        <div class="full"><textarea id="relNotes" placeholder="–í–≤–æ–¥–∏ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ. –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.&#10;–ü—Ä–∏–º–µ—Ä:&#10;üë∑ –£ –∫–ª–∞–¥–æ–≤—â–∏–∫–∞&#10;üîÅ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è...&#10;üßë‚Äçüíº –£ –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞&#10;üì¶ ..."></textarea></div>
      </div>
      <div class="actions">
        <button class="btn btn-primary" id="saveRelease">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn btn-secondary" id="closeAdd">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞: Export -->
  <div class="modal" id="exportModal" role="dialog" aria-modal="true" aria-labelledby="exportTitle">
    <div class="modal-card">
      <h2 id="exportTitle">–ì–æ—Ç–æ–≤—ã–π index.html</h2>
      <textarea id="fullIndexArea" readonly style="min-height:40vh"></textarea>
      <div class="actions">
        <button class="btn btn-copy" id="copyIndex">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="btn btn-secondary" id="closeExport">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const $ = (s,root=document)=>root.querySelector(s);

      // –ì–æ–¥ –≤ —Ñ—É—Ç–µ—Ä–µ
      $('#year').textContent = String(new Date().getFullYear());

      // –®–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞ -> –ø–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
      let edit = false;
      $('#gearBtn').addEventListener('click', () => {
        edit = !edit;
        document.body.classList.toggle('edit-mode', edit);
      });

      // –ú–æ–¥–∞–ª–∫–∏
      const addModal = $('#addModal');
      const exportModal = $('#exportModal');

      $('#addReleaseBtn').addEventListener('click', () => {
        // –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã
        const d = new Date();
        const months = ['—è–Ω–≤–∞—Ä—è','—Ñ–µ–≤—Ä–∞–ª—è','–º–∞—Ä—Ç–∞','–∞–ø—Ä–µ–ª—è','–º–∞—è','–∏—é–Ω—è','–∏—é–ª—è','–∞–≤–≥—É—Å—Ç–∞','—Å–µ–Ω—Ç—è–±—Ä—è','–æ–∫—Ç—è–±—Ä—è','–Ω–æ—è–±—Ä—è','–¥–µ–∫–∞–±—Ä—è'];
        $('#relDate').value = `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
        $('#relVer').value = '';
        $('#relNotes').value = '';
        addModal.style.display = 'flex';
      });
      $('#closeAdd').addEventListener('click', ()=> addModal.style.display='none');

      $('#exportBtn').addEventListener('click', () => {
        $('#fullIndexArea').value = document.documentElement.outerHTML;
        exportModal.style.display = 'flex';
      });
      $('#copyIndex').addEventListener('click', () => {
        const ta = $('#fullIndexArea'); ta.select(); document.execCommand('copy');
      });
      $('#closeExport').addEventListener('click', ()=> exportModal.style.display='none');

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é —Å–≤–µ—Ä—Ö—É –∏ –¥–µ–ª–∞–µ–º –µ–≥–æ ¬´—Ç–µ–∫—É—â–∏–º¬ª
      $('#saveRelease').addEventListener('click', () => {
        const ver = $('#relVer').value.trim();
        const date = $('#relDate').value.trim();
        const lines = $('#relNotes').value.split('\n').map(s=>s.trim()).filter(Boolean);
        if (!ver || !date || !lines.length){ alert('–ó–∞–ø–æ–ª–Ω–∏ –≤–µ—Ä—Å–∏—é, –¥–∞—Ç—É –∏ —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π.'); return; }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
        const historyContent = document.querySelector('.history-content');
        const block = document.createElement('div');
        block.className = 'old-version';
        block.innerHTML = `<strong>–í–µ—Ä—Å–∏—è ${ver}</strong><ul>${lines.map(l=>`<li>${l.replace(/</g,'&lt;')}</li>`).join('')}</ul>`;
        historyContent.insertBefore(block, historyContent.firstChild);

        // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ –≤–µ—Ä—Å–∏–µ–π
        $('#versionLine').textContent = `–í–µ—Ä—Å–∏—è ${ver} –æ—Ç ${date}`;
        const main = $('#mainChangelogBlock');
        main.innerHTML = `<h2>–ß—Ç–æ –Ω–æ–≤–æ–≥–æ ‚Äî ${ver}</h2>`;
        renderSections(lines, main);

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ –≤ summary
        const count = historyContent.querySelectorAll('.old-version').length;
        document.querySelector('.summary-right').textContent = `–ü–æ–∫–∞–∑–∞—Ç—å (${count})`;

        addModal.style.display = 'none';
      });

      // –†–∞–∑–±–æ—Ä: –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü–∏–π
      const sectionHints = ['üë∑','üßë‚Äçüíº','üåê','üí¨','üî•','New Feature','Hotfix','HotFix'];
      function isHeader(line){
        const s = line.trim();
        if (sectionHints.some(e => s.startsWith(e))) return true;
        if (s.length <= 28 && !/[.!?]$/.test(s)) return true;
        return false;
      }
      function renderSections(lines, container){
        let title=null, buf=[];
        const flush = () => {
          if (title){ const h3=document.createElement('h3'); h3.textContent=title; container.appendChild(h3); }
          if (buf.length){ const ul=document.createElement('ul'); buf.forEach(t=>{ const li=document.createElement('li'); li.textContent=t; ul.appendChild(li); }); container.appendChild(ul); }
          title=null; buf=[];
        };
        lines.forEach(l=>{
          if (isHeader(l)) { flush(); title=l; }
          else { buf.push(l); }
        });
        flush();
      }

      // –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –≤–µ—Ä—Å–∏–π –≤ summary –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      const count = document.querySelectorAll('.history-content .old-version').length;
      document.querySelector('.summary-right').textContent = `–ü–æ–∫–∞–∑–∞—Ç—å (${count})`;
    })();
  </script>
</body>
</html>

